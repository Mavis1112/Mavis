<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
    <style media="screen">
      body {background: black;text-align: center;}
      #canvas {background: white;}
    </style>
    <script type="text/javascript">
      window.onload=function () {
        let oC=document.getElementById('canvas');
        let gd=oC.getContext('2d');
        let oImg=new Image();
      
        oImg.src='./sprit1.jpg';
        let sx=84,sy=0,sw=27,sh=28;
        let dx=100,dy=100;
        let frame=0;
        let dir='d';
        let rows={'d':0,'l':1,'r':2,'u':3};
        let speed=15;
        oImg.onload=function () {
          //x 84 111 138 y 28 58 86 114
          document.onkeydown=function (ev){
            let keys={37:'l',38:'u',39:'r',40:'d'};
            dir=keys[ev.keyCode]||dir;
          };

          setInterval(function (){
            gd.clearRect(0,0,oC.width,oC.height);
            gd.drawImage(oImg,sx+27*frame,sy+rows[dir]*29,sw,sh,
                              dx,dy,27*2,28*2);

            frame++
            if(frame==3){
              frame=0;
            }

            switch(dir){
              case 'l':
                dx-=speed;
                break;
              case 'r':
                dx+=speed
                break;
              case 'u':
                dy-=speed
                break;
              case 'd':
                dy+=speed;
                break;
            }
          },160);


        }

      }
    </script>
  </head>
  <body>
    <canvas id="canvas" width="800" height="600"></canvas>
  </body>
</html>
